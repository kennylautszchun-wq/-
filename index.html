import React from 'react';
import { 
  Shield, Umbrella, Wallet, MapPin, Calendar, 
  MessageCircle, Info, Download, Cpu, Target, 
  Zap, Activity, Navigation, Hexagon, Layers
} from 'lucide-react';

const HudBracket = ({ position }) => {
  const positions = {
    tl: "top-8 left-8 border-t-2 border-l-2",
    tr: "top-8 right-8 border-t-2 border-r-2",
    bl: "bottom-8 left-8 border-b-2 border-l-2",
    br: "bottom-8 right-8 border-b-2 border-r-2"
  };
  return <div className={`absolute w-8 h-8 border-blue-500/40 ${positions[position]} pointer-events-none`}></div>;
};

const TaxPage = ({ children, pageNumber, subtitle }) => (
  <div className="relative w-full min-h-[1122px] bg-[#050507] text-white p-16 flex flex-col overflow-hidden border-b border-blue-900/30 print:border-none print:shadow-none mb-10 last:mb-0 shadow-2xl">
    {/* Tech Background */}
    <div className="absolute inset-0 opacity-[0.1] pointer-events-none" 
         style={{ 
           backgroundImage: 'linear-gradient(#1e293b 1px, transparent 1px), linear-gradient(90deg, #1e293b 1px, transparent 1px)', 
           backgroundSize: '40px 40px' 
         }}></div>
    <div className="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(30,58,138,0.1),transparent_70%)]"></div>
    
    <HudBracket position="tl" />
    <HudBracket position="tr" />
    <HudBracket position="bl" />
    <HudBracket position="br" />

    {/* HUD Header */}
    <div className="flex justify-between items-start z-10 mb-12 border-b border-blue-900/50 pb-6">
      <div className="flex items-center gap-4">
        <div className="w-12 h-12 rounded-xl bg-orange-500/10 border border-orange-500/50 flex items-center justify-center shadow-[0_0_15px_rgba(249,115,22,0.3)]">
          <Navigation className="text-orange-500" size={24} />
        </div>
        <div>
          <div className="text-xl font-black tracking-tighter text-white uppercase font-mono">TAX MAP <span className="text-orange-500">2026</span></div>
          <div className="text-[10px] font-mono text-blue-400 tracking-[0.3em] uppercase">{subtitle || 'Sector Navigation'}</div>
        </div>
      </div>
      <div className="text-right font-mono">
        <div className="text-sm text-gray-500 mb-1 tracking-widest">DATA_PACK_ID</div>
        <div className="text-3xl font-bold text-blue-500/80">0{pageNumber}</div>
      </div>
    </div>

    {/* Main Content Area */}
    <div className="flex-1 z-10 flex flex-col">
      {children}
    </div>

    {/* HUD Footer */}
    <div className="mt-12 flex justify-between items-end z-10 pt-6 border-t border-blue-900/50">
      <div className="flex items-center gap-4">
        <div className="flex gap-1">
          <div className="w-1 h-4 bg-blue-500 animate-pulse"></div>
          <div className="w-1 h-4 bg-blue-500/50"></div>
          <div className="w-1 h-4 bg-blue-500/20"></div>
        </div>
        <div className="text-[10px] font-mono text-gray-500 uppercase tracking-widest">
          System.Status: Encrypted // HK_TAX_LAYER_2025_26
        </div>
      </div>
      <div className="text-[10px] font-mono text-orange-500/70 tracking-widest uppercase">
        STRATEGIC_ADVISORY_NODE // KLAU
      </div>
    </div>
  </div>
);

const DataNode = ({ title, value, sub, color = "blue", icon: Icon }) => {
  const theme = {
    blue: "border-blue-500/30 text-blue-400 shadow-[0_0_20px_rgba(59,130,246,0.1)]",
    orange: "border-orange-500/30 text-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.1)]",
  };
  return (
    <div className={`relative bg-[#0d0d12]/80 backdrop-blur-sm border rounded-xl p-6 transition-all hover:bg-blue-900/10 ${theme[color]}`}>
      <div className="flex items-center gap-2 mb-2 opacity-70">
        {Icon && <Icon size={14} />}
        <span className="text-[10px] font-bold uppercase tracking-widest font-mono">{title}</span>
      </div>
      <div className="text-4xl font-black tracking-tighter mb-1">{value}</div>
      {sub && <div className="text-[11px] text-gray-500 font-medium leading-tight">{sub}</div>}
      <div className={`absolute top-0 right-0 w-4 h-4 border-t border-r ${color === 'blue' ? 'border-blue-500/50' : 'border-orange-500/50'}`}></div>
    </div>
  );
};

const App = () => {
  const handlePrint = () => window.print();

  return (
    <div className="bg-[#121214] min-h-screen py-12 print:p-0 print:bg-white font-sans selection:bg-orange-500 selection:text-black">
      {/* Floating Action Bar */}
      <div className="fixed top-8 right-8 z-50 print:hidden">
        <button 
          onClick={handlePrint}
          className="group relative flex items-center gap-3 bg-orange-600 hover:bg-orange-500 text-white font-black py-4 px-8 rounded-xl shadow-[0_0_30px_rgba(249,115,22,0.4)] transition-all active:scale-95 overflow-hidden"
        >
          <Download size={24} />
          <span className="text-lg uppercase tracking-tight">導出 TAX MAP PDF</span>
        </button>
      </div>

      <div className="max-w-[850px] mx-auto">
        
        {/* PAGE 1: COVER */}
        <TaxPage pageNumber={1} subtitle="Navigation.Initialize">
          <div className="flex flex-col justify-center h-full pt-10">
            <div className="flex items-center gap-3 text-orange-500 font-mono text-sm font-bold mb-6">
              <div className="w-2 h-2 bg-orange-500 animate-ping rounded-full"></div>
              <span className="tracking-[0.4em] uppercase">Status: Priority Mission</span>
            </div>
            
            <h1 className="text-[84px] font-black leading-[0.85] mb-10 tracking-tighter uppercase">
              <span className="text-white block">2025/26</span>
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-yellow-500 drop-shadow-[0_0_15px_rgba(249,115,22,0.5)]">慳稅神器</span>
              <br />
              <span className="text-blue-500 text-6xl">導航手冊</span>
            </h1>
            
            <div className="w-32 h-1 bg-blue-500 mb-10 shadow-[0_0_10px_rgba(59,130,246,0.5)]"></div>
            
            <p className="text-xl text-gray-400 max-w-lg mb-20 leading-relaxed font-light">
              整合全港免稅額、扣稅項目及報稅關鍵時間表。<br />
              <span className="text-white font-bold italic underline decoration-orange-500">拒絕繳交智商稅，精準優化財富路徑。</span>
            </p>

            <div className="flex items-center gap-8 bg-blue-900/10 border border-blue-500/20 p-6 rounded-2xl w-fit backdrop-blur-md">
              <div className="relative">
                <div className="w-20 h-20 rounded-full border-2 border-orange-500 p-1 bg-gray-900">
                  <div className="w-full h-full rounded-full bg-gray-800 flex items-center justify-center overflow-hidden">
                    {/* Advisor Headshot - Referencing the one from the QR image */}
                    <img 
                      src="https://api.dicebear.com/7.x/avataaars/svg?seed=Klau" 
                      alt="KLAU" 
                      className="w-full h-full object-cover"
                      onError={(e) => { e.target.style.display = 'none'; }}
                    />
                    <span className="text-[10px] text-gray-500 font-mono">KLAU</span>
                  </div>
                </div>
                <div className="absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-4 border-[#050507] flex items-center justify-center">
                  <Zap size={12} className="text-black" />
                </div>
              </div>
              <div>
                <div className="text-2xl font-black text-white tracking-tight italic uppercase">KLAU</div>
                <div className="text-blue-400 font-mono text-xs uppercase tracking-[0.2em] mt-1">Strategic Wealth Navigator</div>
              </div>
            </div>
          </div>
        </TaxPage>

        {/* PAGE 2: CHEAT SHEET */}
        <TaxPage pageNumber={2} subtitle="Resource.Allocation">
          <div className="pt-8">
            <h2 className="text-5xl font-black mb-12 flex items-baseline gap-4 italic uppercase">
              免稅額 <span className="text-blue-500 text-3xl not-italic font-mono underline decoration-blue-500/30">速查表</span>
            </h2>

            <div className="grid grid-cols-2 gap-6 mb-12">
              <DataNode title="基本免稅額 (個人)" value="$132,000" sub="單身人士基礎稅務防線" color="blue" icon={Cpu} />
              <DataNode title="已婚人士免稅額" value="$264,000" sub="合計報稅雙倍額度" color="blue" icon={Shield} />
              <DataNode title="子女免稅額 (每名)" value="$130,000" sub="出生年度額外加 $130,000" color="orange" icon={Activity} />
              <DataNode title="供養父母 (60+)" value="$50,000" sub="同住再額外增加一倍至 $100k" color="orange" icon={MapPin} />
              <DataNode title="供養父母 (55-59)" value="$25,000" sub="同住再額外增加一倍至 $50k" color="orange" icon={MapPin} />
              <DataNode title="單親免稅額" value="$132,000" sub="特定撫養條件下之隱藏節點" color="blue" icon={Target} />
            </div>

            <div className="relative p-10 rounded-2xl bg-orange-500/5 border border-orange-500/20">
              <div className="absolute top-0 right-0 p-6 opacity-10">
                <Hexagon size={80} />
              </div>
              <h3 className="text-2xl font-black text-orange-500 mb-4 flex items-center gap-3 uppercase tracking-tighter">
                <Zap size={24} className="fill-orange-500" /> 年度優惠：稅款寬減
              </h3>
              <p className="text-gray-300 text-lg leading-relaxed">
                2025/26 年度預計維持 <span className="text-white font-bold underline decoration-blue-500">100% 稅款寬減</span>，上限為 <span className="text-orange-400 font-mono font-bold text-2xl">$3,000</span>。這是系統預設的「資源回收」，務必確保已領取。
              </p>
            </div>
          </div>
        </TaxPage>

        {/* PAGE 3: THE TRINITY */}
        <TaxPage pageNumber={3} subtitle="Artifact.Deployment">
          <div className="pt-8">
            <h2 className="text-5xl font-black mb-4 italic uppercase">三大 <span className="text-blue-500">「扣稅神器」</span></h2>
            <p className="text-gray-400 font-mono text-xs mb-12 tracking-widest uppercase opacity-60">High Efficiency Strategic Tools</p>
            
            <div className="border border-blue-900/30 rounded-2xl overflow-hidden bg-[#0d0d12]/60 backdrop-blur-md">
              <table className="w-full text-left border-collapse">
                <thead>
                  <tr className="bg-blue-900/20">
                    <th className="p-8 text-blue-400 font-mono text-xs uppercase tracking-widest border-b border-blue-900/30">導航工具</th>
                    <th className="p-8 text-blue-400 font-mono text-xs uppercase tracking-widest border-b border-blue-900/30">每年扣稅上限</th>
                    <th className="p-8 text-blue-400 font-mono text-xs uppercase tracking-widest border-b border-blue-900/30">核心戰略價值</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-blue-900/20">
                  <tr className="hover:bg-blue-500/5 transition-colors">
                    <td className="p-8">
                      <div className="flex items-center gap-4">
                        <Shield className="text-orange-500" />
                        <span className="text-xl font-bold">自願醫保 (VHIS)</span>
                      </div>
                    </td>
                    <td className="p-8 text-3xl font-black text-white font-mono">$8,000</td>
                    <td className="p-8 text-sm text-gray-400 leading-relaxed">
                      保障大額醫療開支，同時為家人投保可疊加額度。
                    </td>
                  </tr>
                  <tr>
                    <td className="p-8">
                      <div className="flex items-center gap-4">
                        <Umbrella className="text-orange-500" />
                        <span className="text-xl font-bold">延期年金 (QDAP)</span>
                      </div>
                    </td>
                    <td className="p-8 text-3xl font-black text-white font-mono" rowSpan="2">
                      <div className="flex flex-col items-center border-l border-blue-500/30 pl-8">
                        <span className="text-4xl text-orange-500">$60,000</span>
                        <span className="text-[10px] text-gray-500 uppercase mt-2 font-mono">Combined Limit</span>
                      </div>
                    </td>
                    <td className="p-8 text-sm text-gray-400 leading-relaxed border-b border-blue-900/20">
                      將稅款轉化為退休後的穩定現金流。
                    </td>
                  </tr>
                  <tr className="hover:bg-blue-500/5 transition-colors">
                    <td className="p-8">
                      <div className="flex items-center gap-4">
                        <Wallet className="text-orange-500" />
                        <span className="text-xl font-bold">MPF 自願供款</span>
                      </div>
                    </td>
                    <td className="p-8 text-sm text-gray-400 leading-relaxed">
                      最快、最直接的慳稅路徑，操作門檻最低。
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div className="mt-12 flex gap-8 items-center p-8 bg-blue-500/5 rounded-2xl border-l-4 border-blue-500">
               <Layers className="text-blue-500 shrink-0" size={40} />
               <div>
                 <div className="text-xl font-bold text-white mb-2 italic underline decoration-blue-500/20">總監級策略 (Senior Insight)</div>
                 <p className="text-gray-400 leading-relaxed">
                   「神器」不只是工具，而是對沖未來開支的槓桿。如果你的稅率在 15% 或以上，每一分投入這些工具的錢，都等於即時獲得 15% 的無風險回報。
                 </p>
               </div>
            </div>
          </div>
        </TaxPage>

        {/* PAGE 4: HIDDEN TIPS */}
        <TaxPage pageNumber={4} subtitle="Hidden.Paths.Discovery">
          <div className="pt-8">
            <h2 className="text-5xl font-black mb-12 italic uppercase">隱藏版 <span className="text-blue-500">慳稅位</span></h2>
            
            <div className="space-y-10">
              {[
                { 
                  title: "解密：單親免稅額", 
                  desc: "申請人必須在該年度內獨力或主要負責撫養子女。分居或離婚狀態下的法律定義會直接影響 $132,000 額度的激活。" 
                },
                { 
                  title: "倍化器：父母同住條款", 
                  desc: "只要父母年滿 60 歲且與你同住至少連續 6 個月，免稅額會從 $50,000 瞬間倍增至 $100,000。這是一個必須解鎖的高級節點。" 
                },
                { 
                  title: "新生兒福利：出生年度加給", 
                  desc: "子女出生當年，除了基本的 $130,000，會額外再加 $130,000。總共 $260,000 的免稅額足以大幅降低當年的暫繳稅。" 
                },
                { 
                  title: "路徑選擇：租金 vs 按揭利息", 
                  desc: "住宅租金扣除上限為 $100,000。對於無殼或新婚租樓人士，這是一個比按揭利息更直接的節省路徑。" 
                }
              ].map((tip, i) => (
                <div key={i} className="group flex gap-8">
                  <div className="flex flex-col items-center">
                    <div className="w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500 flex items-center justify-center text-blue-400 font-mono font-bold shadow-[0_0_15px_rgba(59,130,246,0.3)]">
                      0{i+1}
                    </div>
                    {i !== 3 && <div className="flex-1 w-[2px] bg-gradient-to-b from-blue-500/50 to-transparent mt-2"></div>}
                  </div>
                  <div className="pb-8">
                    <h3 className="text-2xl font-black text-white mb-3 tracking-tight group-hover:text-orange-500 transition-colors italic">{tip.title}</h3>
                    <p className="text-gray-400 leading-relaxed font-light">{tip.desc}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </TaxPage>

        {/* PAGE 5: TIMELINE */}
        <TaxPage pageNumber={5} subtitle="Temporal.Mapping">
          <div className="pt-8">
            <h2 className="text-5xl font-black mb-16 italic uppercase">報稅 / 交稅 <span className="text-blue-500 text-3xl font-mono">時間地圖</span></h2>
            
            <div className="relative border-l-2 border-dashed border-blue-900/50 ml-10 pl-16 py-4 space-y-20">
              {[
                { m: "05", label: "MAY", event: "發出報稅表 (綠色炸彈)", sub: "數據輸入階段。網上報稅可自動延長 1 個月。", color: "blue" },
                { m: "06", label: "JUN", event: "提交報稅表截止", sub: "逾期提交會導致系統產生 10% 罰款風險。", color: "blue" },
                { m: "10", label: "OCT-DEC", event: "收到評稅通知書 (稅單)", sub: "核對數據。如需反對，必須在 1 個月內提出。", color: "orange" },
                { m: "01", label: "JAN", event: "繳付第一期稅款", sub: "支付本年度餘額及暫繳稅的 75%。", color: "orange" },
                { m: "04", label: "APR", event: "繳付第二期稅款", sub: "完成本年度最後 25% 暫繳稅支付。", color: "orange" }
              ].map((step, i) => (
                <div key={i} className="relative">
                  <div className={`absolute -left-[76px] top-0 w-4 h-4 rounded-full border-2 ${step.color === 'blue' ? 'bg-blue-500 border-white' : 'bg-orange-500 border-white'} shadow-[0_0_15px_currentColor]`}></div>
                  <div className="flex items-baseline gap-6 mb-2">
                    <div className="text-4xl font-black font-mono text-gray-700">{step.m}</div>
                    <div className={`text-2xl font-black italic uppercase ${step.color === 'blue' ? 'text-blue-400' : 'text-orange-400'}`}>{step.event}</div>
                  </div>
                  <p className="text-gray-500 text-sm max-w-sm font-light">{step.sub}</p>
                </div>
              ))}
            </div>
          </div>
        </TaxPage>

        {/* PAGE 6: CTA & QR CODE */}
        <TaxPage pageNumber={6} subtitle="Mission.Closure">
          <div className="h-full flex flex-col items-center justify-center text-center">
            <div className="mb-20">
               <div className="w-20 h-1 bg-orange-500 mx-auto mb-10 shadow-[0_0_20px_rgba(249,115,22,0.8)]"></div>
               <h2 className="text-[52px] font-black leading-tight italic tracking-tighter uppercase">
                稅務規劃因人而異，<br />
                EXCEL 幫到你計算，<br />
                <span className="text-orange-500 not-italic underline decoration-orange-500/30">但我可以幫你執行。</span>
               </h2>
               <div className="w-20 h-1 bg-orange-500 mx-auto mt-10 shadow-[0_0_20px_rgba(249,115,22,0.8)]"></div>
            </div>

            {/* INTEGRATED QR CODE FROM UPLOADED IMAGE */}
            <div className="group relative p-2 bg-gradient-to-br from-blue-500 to-orange-500 rounded-3xl mb-12 shadow-[0_0_50px_rgba(59,130,246,0.3)] transform transition-transform hover:scale-105 duration-500">
               <div className="bg-white p-4 rounded-[22px] overflow-hidden">
                  <div className="w-56 h-56 bg-white flex items-center justify-center relative">
                    <img 
                      src="IMG_6192.jpg" 
                      alt="WhatsApp QR Code KLAU" 
                      className="w-full h-full object-contain"
                      onError={(e) => {
                        e.target.style.display = 'none';
                        e.target.parentElement.innerHTML = '<div class="flex flex-col items-center justify-center text-black font-black uppercase text-center"><span class="text-xs">SCAN TO CONNECT</span><span class="text-2xl text-orange-600">KLAU</span><span class="text-[8px] opacity-40 mt-2 tracking-tighter">WHATSAPP CONTACT</span></div>';
                      }}
                    />
                  </div>
               </div>
               {/* Decorative Tech Corners for the QR Card */}
               <div className="absolute -top-2 -left-2 w-6 h-6 border-t-2 border-l-2 border-white pointer-events-none"></div>
               <div className="absolute -bottom-2 -right-2 w-6 h-6 border-b-2 border-r-2 border-white pointer-events-none"></div>
            </div>

            <h3 className="text-2xl font-black mb-6 tracking-tight uppercase italic">立即掃描：預約 15 分鐘「稅務地圖診斷」</h3>
            
            <div className="flex gap-6 mb-16">
               <div className="flex items-center gap-3 px-6 py-3 bg-blue-900/40 border border-blue-500/50 rounded-full text-blue-400 font-bold text-sm tracking-widest uppercase hover:bg-blue-500/20 transition-all cursor-pointer">
                  <MessageCircle size={18} /> WhatsApp 專線
               </div>
               <div className="flex items-center gap-3 px-6 py-3 bg-orange-900/40 border border-orange-500/50 rounded-full text-orange-500 font-bold text-sm tracking-widest uppercase hover:bg-orange-500/20 transition-all cursor-pointer">
                  <Navigation size={18} /> ZOOM 線上規劃
               </div>
            </div>

            <div className="text-[10px] font-mono text-gray-600 uppercase tracking-[0.5em] mt-auto">
               End of Navigation // Optimized by Senior Tax Advisor // KLAU
            </div>
          </div>
        </TaxPage>

      </div>
      
      {/* Styles for print and custom typography */}
      <style dangerouslySetInnerHTML={{ __html: `
        @media print {
          body { background: white !important; }
          .bg-\[\#121214\] { background: white !important; padding: 0 !important; }
          .shadow-2xl, .shadow-\[0_0_30px_rgba\(249\,115\,22\,0\.4\)\] { shadow: none !important; box-shadow: none !important; }
          .max-w-\[850px\] { max-width: 100% !important; margin: 0 !important; }
          div, h1, h2, p, span { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
          .print-hidden { display: none !important; }
          .bg-\[\#050507\] { background: #050507 !important; color: white !important; }
        }
        @font-face {
          font-family: 'Noto Sans HK';
          src: url('https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;700;900&display=swap');
        }
        body {
          font-family: 'Noto Sans HK', sans-serif;
          -webkit-font-smoothing: antialiased;
        }
      `}} />
    </div>
  );
};

export default App;
